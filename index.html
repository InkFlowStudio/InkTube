<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>InkTube - YouTube Videos without Ads</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #ff0000;
      --primary-dark: #cc0000;
      --dark-bg: #0f0f0f;
      --dark-card: #202020;
      --dark-text: #f1f1f1;
      --light-text: #aaa;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
      --border-radius: 12px;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Roboto, Arial, sans-serif;
    }

    body {
      background-color: var(--dark-bg);
      color: var(--dark-text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background-color: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-md) var(--spacing-xl);
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      cursor: pointer;
    }

    .logo h1 {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary);
      letter-spacing: -1px;
    }

    .logo i {
      color: var(--primary);
      font-size: 1.5rem;
    }

    .search-bar {
      flex: 1;
      max-width: 600px;
      margin: 0 var(--spacing-xl);
      position: relative;
    }

    .search-bar input {
      width: 100%;
      padding: 10px 50px 10px 20px;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--dark-text);
      font-size: 1rem;
      transition: var(--transition);
    }

    .search-bar input:focus {
      outline: none;
      border-color: var(--primary);
      background: rgba(30, 30, 30, 0.9);
      box-shadow: 0 0 0 2px rgba(255, 0, 0, 0.2);
    }

    .search-bar button {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      color: var(--dark-text);
      cursor: pointer;
      transition: var(--transition);
    }

    .search-bar button:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    nav {
      display: flex;
      gap: var(--spacing-md);
    }

    nav a {
      color: var(--dark-text);
      text-decoration: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      font-size: 0.8rem;
      transition: var(--transition);
      padding: 8px;
      border-radius: var(--border-radius);
    }

    nav a i {
      font-size: 1.2rem;
    }

    nav a:hover, nav a.active {
      background: rgba(255, 255, 255, 0.1);
    }

    nav a.upload {
      color: var(--primary);
    }

    .user-actions {
      display: flex;
      gap: var(--spacing-md);
      align-items: center;
    }

    .user-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
    }

    .container {
      display: flex;
      flex: 1;
    }

    .sidebar {
      width: 240px;
      padding: var(--spacing-lg) var(--spacing-md);
      overflow-y: auto;
      position: sticky;
      top: 80px;
      height: calc(100vh - 80px);
      flex-shrink: 0;
    }

    .sidebar-item {
      display: flex;
      align-items: center;
      padding: var(--spacing-sm) var(--spacing-md);
      border-radius: var(--border-radius);
      margin-bottom: 4px;
      cursor: pointer;
      transition: var(--transition);
    }

    .sidebar-item:hover, .sidebar-item.active {
      background: rgba(255, 255, 255, 0.1);
    }

    .sidebar-item i {
      margin-right: var(--spacing-md);
      font-size: 1.2rem;
      width: 24px;
      text-align: center;
    }

    .sidebar-item.active i {
      color: var(--primary);
    }

    .sidebar h3 {
      padding: var(--spacing-md) var(--spacing-md) var(--spacing-sm);
      font-size: 0.9rem;
      color: var(--light-text);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .main-content {
      flex: 1;
      padding: var(--spacing-lg) var(--spacing-xl);
    }

    .video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--spacing-lg);
    }

    .video-card {
      background: var(--dark-card);
      border-radius: var(--border-radius);
      overflow: hidden;
      transition: var(--transition);
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .video-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    }

    .thumbnail {
      position: relative;
      height: 0;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      overflow: hidden;
    }

    .thumbnail img {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition);
    }

    .video-card:hover .thumbnail img {
      transform: scale(1.05);
    }

    .video-duration {
      position: absolute;
      bottom: 8px;
      right: 8px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 500;
    }

    .video-info {
      padding: var(--spacing-md);
    }

    .channel-info {
      display: flex;
      margin-top: var(--spacing-sm);
      align-items: flex-start;
    }

    .channel-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #555;
      flex-shrink: 0;
      margin-right: var(--spacing-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .video-details {
      flex: 1;
    }

    .video-title {
      font-weight: 500;
      margin-bottom: 4px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      font-size: 1rem;
      line-height: 1.4;
    }

    .channel-name {
      color: var(--light-text);
      font-size: 0.9rem;
      margin-bottom: 2px;
    }

    .video-meta {
      color: var(--light-text);
      font-size: 0.85rem;
      display: flex;
      gap: 8px;
    }

    .video-player-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: var(--spacing-xl) 0;
    }

    .video-player {
      position: relative;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      height: 0;
      overflow: hidden;
      border-radius: var(--border-radius);
      background: #000;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .video-player iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      border-radius: var(--border-radius);
    }

    .player-info {
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-md) 0;
    }

    .video-actions {
      display: flex;
      gap: var(--spacing-md);
    }

    .action-button {
      display: flex;
      align-items: center;
      gap: 6px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50px;
      padding: 8px 16px;
      color: var(--dark-text);
      cursor: pointer;
      transition: var(--transition);
    }

    .action-button:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .download-button {
      background: var(--primary);
      color: white;
      font-weight: 500;
    }

    .download-button:hover {
      background: var(--primary-dark);
    }

    .related-videos {
      margin-top: var(--spacing-xl);
    }

    .section-title {
      font-size: 1.4rem;
      margin-bottom: var(--spacing-md);
      padding-bottom: var(--spacing-sm);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    footer {
      background: rgba(0, 0, 0, 0.8);
      padding: var(--spacing-xl);
      text-align: center;
      margin-top: auto;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: var(--spacing-lg);
      margin-bottom: var(--spacing-md);
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--light-text);
      text-decoration: none;
      font-size: 0.9rem;
      transition: var(--transition);
    }

    .footer-links a:hover {
      color: var(--primary);
    }

    .copyright {
      color: var(--light-text);
      font-size: 0.9rem;
    }

    .mobile-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      padding: var(--spacing-sm) 0;
      z-index: 100;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .mobile-nav-items {
      display: flex;
      justify-content: space-around;
    }

    .mobile-nav-items a {
      color: var(--dark-text);
      text-decoration: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 0.75rem;
      gap: 4px;
    }

    .mobile-nav-items a i {
      font-size: 1.2rem;
    }

    .mobile-nav-items a.active {
      color: var(--primary);
    }

    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
    }

    .loading-spinner {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 4px solid var(--primary);
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .no-results {
      text-align: center;
      padding: 40px;
      color: var(--light-text);
    }

    .no-results i {
      font-size: 3rem;
      margin-bottom: 20px;
      color: var(--primary);
    }

    @media (max-width: 1200px) {
      .sidebar {
        width: 200px;
      }
    }

    @media (max-width: 992px) {
      .sidebar {
        display: none;
      }
      
      .search-bar {
        margin: 0 var(--spacing-md);
      }
    }

    @media (max-width: 768px) {
      .logo h1 {
        font-size: 1.5rem;
      }
      
      .user-actions .btn {
        display: none;
      }
      
      .video-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
      
      .mobile-nav {
        display: block;
      }
      
      nav {
        display: none;
      }
      
      .video-player-container {
        padding: var(--spacing-md);
      }
    }

    @media (max-width: 576px) {
      .search-bar {
        display: none;
      }
      
      .logo {
        flex: 1;
      }
      
      .video-grid {
        grid-template-columns: 1fr;
      }
      
      .player-info {
        flex-direction: column;
        gap: var(--spacing-md);
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo" onclick="loadPopularVideos()">
      <i class="fas fa-play-circle"></i>
      <h1>InkTube</h1>
    </div>
    
    <div class="search-bar">
      <input type="text" id="search-input" placeholder="Search YouTube videos...">
      <button onclick="searchVideos()"><i class="fas fa-search"></i></button>
    </div>
    
    <nav>
      <a href="#" class="active" onclick="loadPopularVideos()"><i class="fas fa-home"></i> Home</a>
      <a href="#" onclick="loadTrendingVideos()"><i class="fas fa-fire"></i> Trending</a>
      <a href="#" class="upload" onclick="showUploadMessage()"><i class="fas fa-cloud-upload-alt"></i> Upload</a>
      <a href="#" onclick="loadHistory()"><i class="fas fa-history"></i> History</a>
    </nav>
    
    <div class="user-actions">
      <button class="btn" onclick="showNotification()"><i class="fas fa-bell"></i></button>
      <div class="user-icon">U</div>
    </div>
  </header>
  
  <div class="container">
    <div class="sidebar">
      <div class="sidebar-item active" onclick="loadPopularVideos()">
        <i class="fas fa-home"></i> Home
      </div>
      <div class="sidebar-item" onclick="loadTrendingVideos()">
        <i class="fas fa-fire"></i> Trending
      </div>
      <div class="sidebar-item" onclick="showSubscriptionsMessage()">
        <i class="fas fa-film"></i> Subscriptions
      </div>
      
      <h3>Library</h3>
      <div class="sidebar-item" onclick="loadHistory()">
        <i class="fas fa-history"></i> History
      </div>
      <div class="sidebar-item" onclick="showWatchLaterMessage()">
        <i class="fas fa-clock"></i> Watch later
      </div>
      <div class="sidebar-item" onclick="showLikedVideosMessage()">
        <i class="fas fa-thumbs-up"></i> Liked videos
      </div>
      
      <h3>Categories</h3>
      <div class="sidebar-item" onclick="searchVideos('gaming')">
        <i class="fas fa-gamepad"></i> Gaming
      </div>
      <div class="sidebar-item" onclick="searchVideos('music')">
        <i class="fas fa-music"></i> Music
      </div>
      <div class="sidebar-item" onclick="searchVideos('sports')">
        <i class="fas fa-basketball-ball"></i> Sports
      </div>
      <div class="sidebar-item" onclick="searchVideos('technology')">
        <i class="fas fa-laptop-code"></i> Technology
      </div>
      <div class="sidebar-item" onclick="searchVideos('education')">
        <i class="fas fa-lightbulb"></i> Education
      </div>
    </div>
    
    <div class="main-content" id="main-content">
      <!-- Content will be loaded dynamically -->
      <div class="loading">
        <div class="loading-spinner"></div>
      </div>
    </div>
  </div>
  
  <footer>
    <div class="footer-links">
      <a href="#">About</a>
      <a href="#">Terms</a>
      <a href="#">Privacy</a>
      <a href="#">Feedback</a>
      <a href="#">Contact</a>
      <a href="#">Developers</a>
    </div>
    <p class="copyright">© 2025 InkTube | No ads. Just content.</p>
  </footer>
  
  <div class="mobile-nav">
    <div class="mobile-nav-items">
      <a href="#" class="active" onclick="loadPopularVideos()"><i class="fas fa-home"></i><span>Home</span></a>
      <a href="#" onclick="loadTrendingVideos()"><i class="fas fa-fire"></i><span>Trending</span></a>
      <a href="#" onclick="showSubscriptionsMessage()"><i class="fas fa-film"></i><span>Subscriptions</span></a>
      <a href="#" onclick="showUploadMessage()"><i class="fas fa-cloud-upload-alt"></i><span>Upload</span></a>
      <a href="#" onclick="showAccount()"><i class="fas fa-user"></i><span>Account</span></a>
    </div>
  </div>
  
  <script>
    // YouTube API configuration
    const API_KEY = 'AIzaSyDc0L0LrB0j6Fc3JkDq8Z5jGqk7v4tJzX0'; // Note: This is a demo key - replace with your own
    const BASE_URL = 'https://www.googleapis.com/youtube/v3';
    
    // Video history storage
    let videoHistory = JSON.parse(localStorage.getItem('inktube_history')) || [];
    
    // DOM elements
    const mainContent = document.getElementById('main-content');
    
    // Initialize the page
    document.addEventListener('DOMContentLoaded', () => {
      loadPopularVideos();
      adjustVideoGrid();
    });
    
    // Load popular videos
    async function loadPopularVideos() {
      showLoading();
      try {
        const response = await fetch(`${BASE_URL}/videos?part=snippet,contentDetails,statistics&chart=mostPopular&maxResults=24&regionCode=US&key=${API_KEY}`);
        const data = await response.json();
        if (data.items && data.items.length > 0) {
          renderVideoGrid(data.items);
        } else {
          showNoResults();
        }
      } catch (error) {
        console.error('Error fetching popular videos:', error);
        showError();
      }
    }
    
    // Load trending videos
    async function loadTrendingVideos() {
      showLoading();
      try {
        const response = await fetch(`${BASE_URL}/videos?part=snippet,contentDetails,statistics&chart=mostPopular&maxResults=24&regionCode=US&videoCategoryId=24&key=${API_KEY}`);
        const data = await response.json();
        if (data.items && data.items.length > 0) {
          renderVideoGrid(data.items);
        } else {
          showNoResults();
        }
      } catch (error) {
        console.error('Error fetching trending videos:', error);
        showError();
      }
    }
    
    // Search videos
    async function searchVideos(query = '') {
      if (!query) {
        query = document.getElementById('search-input').value;
        if (!query) return;
      }
      
      showLoading();
      try {
        const response = await fetch(`${BASE_URL}/search?part=snippet&maxResults=24&q=${encodeURIComponent(query)}&type=video&key=${API_KEY}`);
        const data = await response.json();
        if (data.items && data.items.length > 0) {
          const videoIds = data.items.map(item => item.id.videoId).join(',');
          const videosResponse = await fetch(`${BASE_URL}/videos?part=snippet,contentDetails,statistics&id=${videoIds}&key=${API_KEY}`);
          const videosData = await videosResponse.json();
          renderVideoGrid(videosData.items);
        } else {
          showNoResults();
        }
      } catch (error) {
        console.error('Error searching videos:', error);
        showError();
      }
    }
    
    // Load video history
    function loadHistory() {
      if (videoHistory.length === 0) {
        mainContent.innerHTML = `
          <div class="no-results">
            <i class="fas fa-history"></i>
            <h2>No History Available</h2>
            <p>Your watched videos will appear here</p>
          </div>
        `;
        return;
      }
      
      renderVideoGrid(videoHistory);
    }
    
    // Load a specific video
    async function loadVideo(videoId) {
      showLoading();
      try {
        // Get video details
        const response = await fetch(`${BASE_URL}/videos?part=snippet,contentDetails,statistics&id=${videoId}&key=${API_KEY}`);
        const data = await response.json();
        if (data.items && data.items.length > 0) {
          const video = data.items[0];
          renderVideoPlayer(video);
          
          // Add to history
          addToHistory(video);
          
          // Load related videos
          loadRelatedVideos(videoId);
        } else {
          showNoResults();
        }
      } catch (error) {
        console.error('Error loading video:', error);
        showError();
      }
    }
    
    // Load related videos
    async function loadRelatedVideos(videoId) {
      try {
        const response = await fetch(`${BASE_URL}/search?part=snippet&relatedToVideoId=${videoId}&type=video&maxResults=12&key=${API_KEY}`);
        const data = await response.json();
        if (data.items && data.items.length > 0) {
          const videoIds = data.items.map(item => item.id.videoId).join(',');
          const videosResponse = await fetch(`${BASE_URL}/videos?part=snippet,contentDetails,statistics&id=${videoIds}&key=${API_KEY}`);
          const videosData = await videosResponse.json();
          renderRelatedVideos(videosData.items);
        }
      } catch (error) {
        console.error('Error loading related videos:', error);
      }
    }
    
    // Add video to history
    function addToHistory(video) {
      // Check if video is already in history
      const existingIndex = videoHistory.findIndex(v => v.id === video.id);
      if (existingIndex !== -1) {
        // Remove existing entry
        videoHistory.splice(existingIndex, 1);
      }
      
      // Add to beginning of history
      videoHistory.unshift(video);
      
      // Keep only last 50 videos
      if (videoHistory.length > 50) {
        videoHistory.pop();
      }
      
      // Save to localStorage
      localStorage.setItem('inktube_history', JSON.stringify(videoHistory));
    }
    
    // Render video grid
    function renderVideoGrid(videos) {
      mainContent.innerHTML = `
        <div class="video-grid" id="main-video-grid">
          ${videos.map(video => createVideoCard(video)).join('')}
        </div>
      `;
      
      // Add event listeners to video cards
      videos.forEach(video => {
        document.getElementById(`video-card-${video.id}`).addEventListener('click', () => loadVideo(video.id));
      });
      
      adjustVideoGrid();
    }
    
    // Render video player
    function renderVideoPlayer(video) {
      const snippet = video.snippet;
      const stats = video.statistics;
      
      mainContent.innerHTML = `
        <div class="video-player-container">
          <div class="video-player">
            <iframe 
              id="ytplayer" 
              src="https://www.youtube.com/embed/${video.id}?autoplay=1&rel=0&modestbranding=1" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen>
            </iframe>
          </div>
          
          <div class="player-info">
            <div class="video-details">
              <h2 class="video-title">${snippet.title}</h2>
              <div class="video-meta">
                <span>${formatNumber(stats.viewCount)} views</span>
                <span>•</span>
                <span>${formatDate(snippet.publishedAt)}</span>
              </div>
            </div>
            
            <div class="video-actions">
              <button class="action-button" onclick="toggleLike()">
                <i class="fas fa-thumbs-up"></i> ${formatNumber(stats.likeCount)}
              </button>
              <button class="action-button" onclick="toggleDislike()">
                <i class="fas fa-thumbs-down"></i> ${formatNumber(stats.dislikeCount || 0)}
              </button>
              <button class="action-button" onclick="shareVideo()">
                <i class="fas fa-share"></i> Share
              </button>
              <button class="action-button download-button" onclick="downloadVideo('${video.id}')">
                <i class="fas fa-download"></i> Download
              </button>
            </div>
          </div>
          
          <div class="channel-card">
            <div class="channel-info">
              <div class="channel-icon">${snippet.channelTitle.charAt(0)}</div>
              <div>
                <div class="channel-name">${snippet.channelTitle}</div>
                <div class="subscribers">${formatNumber(stats.subscriberCount || 'N/A')} subscribers</div>
              </div>
              <button class="action-button" onclick="toggleSubscribe()">Subscribe</button>
            </div>
            <p class="video-description">${snippet.description}</p>
          </div>
        </div>
        
        <div class="related-videos">
          <h3 class="section-title">Related Videos</h3>
          <div class="video-grid" id="related-videos-grid">
            <div class="loading">
              <div class="loading-spinner"></div>
            </div>
          </div>
        </div>
      `;
    }
    
    // Render related videos
    function renderRelatedVideos(videos) {
      const relatedGrid = document.getElementById('related-videos-grid');
      if (!relatedGrid) return;
      
      relatedGrid.innerHTML = videos.map(video => createVideoCard(video)).join('');
      
      // Add event listeners to related video cards
      videos.forEach(video => {
        document.getElementById(`video-card-${video.id}`).addEventListener('click', () => loadVideo(video.id));
      });
    }
    
    // Create video card HTML
    function createVideoCard(video) {
      const snippet = video.snippet;
      const duration = video.contentDetails ? formatDuration(video.contentDetails.duration) : 'N/A';
      const views = video.statistics ? formatNumber(video.statistics.viewCount) : 'N/A';
      
      return `
        <div class="video-card" id="video-card-${video.id}">
          <div class="thumbnail">
            <img src="${snippet.thumbnails.medium.url}" alt="${snippet.title}">
            <div class="video-duration">${duration}</div>
          </div>
          <div class="video-info">
            <h3 class="video-title">${snippet.title}</h3>
            <div class="channel-info">
              <div class="channel-icon">${snippet.channelTitle.charAt(0)}</div>
              <div class="video-details">
                <div class="channel-name">${snippet.channelTitle}</div>
                <div class="video-meta">${views} views • ${formatDate(snippet.publishedAt)}</div>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
    // Format large numbers
    function formatNumber(num) {
      if (!num) return '0';
      num = parseInt(num);
      if (num >= 1000000000) {
        return (num / 1000000000).toFixed(1) + 'B';
      }
      if (num >= 1000000) {
        return (num / 1000000).toFixed(1) + 'M';
      }
      if (num >= 1000) {
        return (num / 1000).toFixed(1) + 'K';
      }
      return num.toString();
    }
    
    // Format date
    function formatDate(dateString) {
      const date = new Date(dateString);
      const now = new Date();
      const diffDays = Math.floor((now - date) / (1000 * 60 * 60 * 24));
      
      if (diffDays === 0) return 'Today';
      if (diffDays === 1) return 'Yesterday';
      if (diffDays < 7) return `${diffDays} days ago`;
      if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
      if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
      return `${Math.floor(diffDays / 365)} years ago`;
    }
    
    // Format duration (ISO 8601 format)
    function formatDuration(duration) {
      const match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
      
      const hours = (match[1] ? parseInt(match[1]) : 0);
      const minutes = (match[2] ? parseInt(match[2]) : 0);
      const seconds = (match[3] ? parseInt(match[3]) : 0);
      
      let result = '';
      
      if (hours > 0) {
        result += `${hours}:`;
      }
      
      if (minutes > 0) {
        result += hours > 0 ? `${minutes.toString().padStart(2, '0')}:` : `${minutes}:`;
      } else if (hours > 0) {
        result += '00:';
      }
      
      result += seconds.toString().padStart(2, '0');
      
      return result;
    }
    
    // Toggle like functionality
    function toggleLike() {
      const likeButton = document.querySelector('.player-info .action-button:nth-child(1)');
      const likeCount = parseInt(likeButton.textContent.replace(/[^0-9]/g, ''));
      
      if (likeButton.classList.contains('liked')) {
        likeButton.innerHTML = '<i class="fas fa-thumbs-up"></i> ' + formatNumber(likeCount - 1);
        likeButton.classList.remove('liked');
      } else {
        likeButton.innerHTML = '<i class="fas fa-thumbs-up"></i> ' + formatNumber(likeCount + 1);
        likeButton.classList.add('liked');
      }
    }
    
    // Toggle dislike functionality
    function toggleDislike() {
      const dislikeButton = document.querySelector('.player-info .action-button:nth-child(2)');
      
      if (dislikeButton.classList.contains('disliked')) {
        dislikeButton.classList.remove('disliked');
      } else {
        dislikeButton.classList.add('disliked');
      }
    }
    
    // Share video functionality
    function shareVideo() {
      const videoId = document.getElementById('ytplayer').src.split('/').pop().split('?')[0];
      const shareUrl = `https://www.youtube.com/watch?v=${videoId}`;
      
      if (navigator.share) {
        navigator.share({
          title: document.querySelector('.video-title').textContent,
          text: 'Check out this video on InkTube',
          url: shareUrl
        });
      } else {
        navigator.clipboard.writeText(shareUrl)
          .then(() => {
            alert('Link copied to clipboard: ' + shareUrl);
          })
          .catch(err => {
            console.error('Failed to copy: ', err);
            prompt('Copy this link:', shareUrl);
          });
      }
    }
    
    // Download video functionality
    function downloadVideo(videoId) {
      alert('For security reasons, downloading YouTube videos directly is not supported. You can use third-party services to download videos.');
    }
    
    // Toggle subscribe functionality
    function toggleSubscribe() {
      const subscribeButton = document.querySelector('.channel-card .action-button');
      
      if (subscribeButton.textContent === 'Subscribe') {
        subscribeButton.innerHTML = '<i class="fas fa-check"></i> Subscribed';
        subscribeButton.style.background = 'rgba(255, 255, 255, 0.1)';
      } else {
        subscribeButton.innerHTML = 'Subscribe';
        subscribeButton.style.background = '';
      }
    }
    
    // Show loading state
    function showLoading() {
      mainContent.innerHTML = `
        <div class="loading">
          <div class="loading-spinner"></div>
        </div>
      `;
    }
    
    // Show no results message
    function showNoResults() {
      mainContent.innerHTML = `
        <div class="no-results">
          <i class="fas fa-search"></i>
          <h2>No Videos Found</h2>
          <p>Try a different search term or category</p>
        </div>
      `;
    }
    
    // Show error message
    function showError() {
      mainContent.innerHTML = `
        <div class="no-results">
          <i class="fas fa-exclamation-triangle"></i>
          <h2>Error Loading Content</h2>
          <p>Please try again later</p>
        </div>
      `;
    }
    
    // Show account information
    function showAccount() {
      mainContent.innerHTML = `
        <div class="channel-card">
          <div class="channel-info">
            <div class="channel-icon">U</div>
            <div>
              <div class="channel-name">Your Account</div>
              <div class="subscribers">InkTube Premium Member</div>
            </div>
          </div>
          <div class="video-description">
            <h3>Account Settings</h3>
            <ul>
              <li>Email: user@example.com</li>
              <li>Subscription: Premium (Ad-Free)</li>
              <li>Watch History: ${videoHistory.length} videos</li>
            </ul>
          </div>
        </div>
      `;
    }
    
    // Show message for unimplemented features
    function showUploadMessage() {
      alert('Video uploads are not available in this demo. This feature would require backend implementation.');
    }
    
    function showSubscriptionsMessage() {
      alert('Subscription management is not available in this demo.');
    }
    
    function showWatchLaterMessage() {
      alert('Watch later functionality is not available in this demo.');
    }
    
    function showLikedVideosMessage() {
      alert('Liked videos functionality is not available in this demo.');
    }
    
    function showNotification() {
      alert('You have no new notifications.');
    }
    
    // Responsive video grid
    function adjustVideoGrid() {
      const videoGrid = document.querySelector('.video-grid');
      if (!videoGrid) return;
      
      const width = window.innerWidth;
      
      if (width < 768) {
        videoGrid.style.gridTemplateColumns = '1fr';
      } else if (width < 1200) {
        videoGrid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(250px, 1fr))';
      } else {
        videoGrid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(280px, 1fr))';
      }
    }
    
    window.addEventListener('resize', adjustVideoGrid);
    
    // Handle Enter key in search
    document.getElementById('search-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        searchVideos();
      }
    });
  </script>
</body>
</html>
